function [pr, rc, fm] = pr_rc_fm(scores, lab, thresh)
% [pr, rc, fm] = pr_rc_fm(scores, lab, thresh)
% PR_RC_FM: Computes the precision, recall, and f-measure
% INPUTS:
% rr: responses of each testing observations (0/1)
% lab: true labels of the testing set
% OUTPUTS:
% pr:
lab = lab > 0;             
P   = sum( lab);          % # positives.
% N   = sum(~lab);          % # negatives.
nb_thresh = length(thresh);
pr = zeros(nb_thresh,1);
rc = zeros(nb_thresh,1);
fm = zeros(nb_thresh,1);
tp_fp = zeros(nb_thresh,1);
for i = 1:nb_thresh
    res = (scores <= thresh(i));
    rc(i) = sum( lab(res)); % true positive
    pr(i) = sum( lab(res)); % true positive
    tp_fp(i) = sum(~lab(res)) + pr(i); % true positive + false negative
    
    pr(i) = pr(i)/tp_fp(i);
    rc(i) = rc(i)/P;
    fm(i) = (2*pr(i)*rc(i))/(pr(i)+rc(i));
end

end